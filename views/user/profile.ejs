<!-- Main Content Area -->
<div class="flex-1">
  <div class="bg-white shadow-custom rounded-xl overflow-hidden">
    <!-- Profile Section -->
    <div class="p-6 md:p-8 space-y-8">
      <div class="flex flex-col sm:flex-row items-center sm:items-start gap-8">
        <!-- Profile Image -->
        <div class="flex-shrink-0">
          <div class="relative group">
            <img 
              src="/uploads/profileImages/<%= userData.userImage[0] %>" 
              alt="Profile Image" 
              class="w-32 h-32 sm:w-36 sm:h-36 object-cover rounded-full border-4 border-primary shadow-lg transition-transform group-hover:scale-105"
            />
            <div class="absolute inset-0 bg-primary bg-opacity-0 group-hover:bg-opacity-20 rounded-full transition-all duration-300"></div>
          </div>
        </div>

        <!-- Profile Info -->
        <div class="flex-1 text-center sm:text-left">
          <h2 class="text-2xl sm:text-3xl font-extrabold theme mb-4">Hello, <%= userData.name %></h2>
          <div class="text-gray-700 space-y-3 text-sm sm:text-base">
            <p class="flex items-center justify-center sm:justify-start gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <span><strong>Email:</strong> <%= userData.email %></span>
            </p>
            <p class="flex items-center justify-center sm:justify-start gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              <span><strong>Phone:</strong> <%= userData.phone %></span>
            </p>
          </div>
        </div>
      </div>

      <!-- Wallet & Referral Section -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
        <!-- Referral Code -->
        <div class="bg-gradient-to-r from-primary to-primary-light rounded-xl p-6 text-white shadow-lg card-hover">
          <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
            <i class="fas fa-gift"></i>
            Your Referral Code
          </h3>
          <div class="flex items-center">
            <input 
              type="text" 
              id="referralCode" 
              value="<%= userData.referralCode %>" 
              readonly 
              class="bg-white bg-opacity-20 border border-white border-opacity-30 text-white font-medium px-4 py-2.5 rounded-lg flex-1"
            >
            <button 
              onclick="copyReferralCode()" 
              class="bg-white text-primary px-4 py-2.5 rounded-lg ml-2 hover:bg-opacity-90 transition font-medium"
            >
              <i class="fas fa-copy mr-1"></i>
              Copy
            </button>
          </div>
          <p class="text-sm mt-2 text-white text-opacity-80">Share with friends to earn rewards!</p>
        </div>

        <!-- Wallet Balance -->
        <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-6 text-white shadow-lg card-hover">
          <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
            <i class="fas fa-wallet"></i>
            Wallet Balance
          </h3>
          <div class="flex items-center">
            <div class="bg-white bg-opacity-20 border border-white border-opacity-30 text-white font-medium px-4 py-2.5 rounded-lg flex-1 text-xl">
              â‚¹ <%= userData.wallet.toFixed(2) %>
            </div>
          </div>
          <p class="text-sm mt-2 text-white text-opacity-80">Use your balance for purchases or save for later!</p>
        </div>
      </div>

      <!-- Address Section -->
      <div class="border-t border-gray-200 pt-8 mt-8">
        <h3 class="text-xl font-semibold theme mb-6 flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          Saved Addresses
        </h3>

        <% if (addressData.length) { %>
          <div class="grid sm:grid-cols-2 gap-6">
            <% addressData.forEach(addr => { %>
              <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition card-hover">
                <div class="flex justify-between items-start mb-3">
                  <p class="font-semibold text-primary flex items-center gap-2">
                    <i class="fas fa-home"></i>
                    <%= addr.addressType %> Address
                  </p>
                  <span class="bg-primary bg-opacity-10 text-primary text-xs px-2 py-1 rounded-full font-medium"><%= addr.addressType %></span>
                </div>
                <div class="text-gray-700 space-y-2">
                  <p class="font-medium"><%= addr.name %></p>
                  <p class="flex items-start gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    </svg>
                    <span><%= addr.city %>, <%= addr.state %> - <%= addr.pincode %></span>
                  </p>
                  <p class="flex items-start gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>Landmark: <%= addr.landmark %></span>
                  </p>
                  <p class="flex items-start gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                    <span>Phone: <%= addr.phone %> | Alt: <%= addr.altPhone %></span>
                  </p>
                </div>
              </div>
            <% }) %>
          </div>
        <% } else { %>
          <div class="bg-gray-50 rounded-xl p-8 text-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            <p class="text-gray-500 mb-4">You haven't added any addresses yet.</p>
            <a href="/user/profile/addresses/add" class="inline-block bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition">
              <i class="fas fa-plus mr-2"></i>
              Add New Address
            </a>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-10 opacity-0 transition-all duration-300 z-50 hidden">
  <span id="toast-message"></span>
</div>

<script>
  // Copy referral code function
  function copyReferralCode() {
    const input = document.getElementById("referralCode");
    input.select();
    document.execCommand("copy");
    showToast("Referral code copied!", "success");
  }
  
  // Show toast notification
  function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    
    if (toast && toastMessage) {
      toastMessage.textContent = message;
      
      // Set background color based on type
      if (type === 'success') {
        toast.classList.add('bg-primary');
        toast.classList.remove('bg-gray-800', 'bg-red-600');
      } else if (type === 'error') {
        toast.classList.add('bg-red-600');
        toast.classList.remove('bg-gray-800', 'bg-primary');
      } else {
        toast.classList.add('bg-gray-800');
        toast.classList.remove('bg-primary', 'bg-red-600');
      }
      
      // Show toast
      toast.classList.remove('hidden', 'translate-y-10', 'opacity-0');
      
      // Hide toast after 3 seconds
      setTimeout(() => {
        toast.classList.add('translate-y-10', 'opacity-0');
        setTimeout(() => {
          toast.classList.add('hidden');
        }, 300);
      }, 3000);
    }
  }
</script>